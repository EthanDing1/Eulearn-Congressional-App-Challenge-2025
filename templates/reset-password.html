<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">

        <title>Eulearn | Reset Password</title>
        <link rel="stylesheet" href="{{url_for('static', filename = 'css/styles.css')}}">
        <link rel="stylesheet" href="{{url_for('static', filename = 'css/pagetransition.css')}}">
        <link rel="icon" href="{{url_for('static', filename = 'images/owlonly.png')}}" type="image/png">

    </head>
    <body id="login-body">
        <nav>
            <div class="navdiv">
                <div class="logo"><a href="{{url_for('main')}}"><img src="{{url_for('static', filename = 'images/logo.png')}}" alt="Eulearn Logo"></a></div>
                <ul>
                    <li><a href="{{url_for('solver_page')}}" class="navlink">Integral Solver</a></li>
                    <li><a href="{{url_for('techniques_page')}}" class="navlink">Techniques</a></li>
                    <li><a href="{{url_for('about')}}" class="navlink">About</a></li>
                    <button class="button" id="login" onclick="window.location.href='{{url_for('login_page')}}'">Login</button>
                    <button class="button" onclick="window.location.href='{{url_for('getstarted')}}'">Get Started</button>
                </ul>
            </div>
        </nav>

        <div class="login-form" id="reset-form-container">
            <img src="{{url_for('static', filename = 'images/owlonly.png')}}">
            <h2>Reset Password</h2>
            <h4 id="get-started-subtitle">Enter your new password</h4>
            
            <div id="loading-state" style="display: none; text-align: center; padding: 20px;">
                <p>Verifying reset link...</p>
            </div>

            <div id="error-state" style="display: none; text-align: center;">
                <p style="color: #dc3545; margin-bottom: 20px;">
                    This password reset link is invalid or has expired.
                </p>
                <button class="button" onclick="window.location.href='{{url_for('login_page')}}'">
                    Back to Login
                </button>
            </div>

            <div class="form-element" id="reset-form" style="display: none;">
                <form id="password-reset-form" novalidate>
                    <div class="input-box">
                        <input type="password" id="newPassword" placeholder="New Password" title="New Password" required>
                        <span class="error-msg"></span>
                    </div>
                    <div class="input-box">
                        <input type="password" id="confirmPassword" placeholder="Confirm New Password" title="Confirm New Password" required>
                        <span class="error-msg"></span>
                    </div>
                    <div class="input-box">
                        <button type="submit" class="button" title="Reset Password">Reset Password</button>
                    </div>
                </form>
            </div>

            <div id="success-state" style="display: none; text-align: center;">
                <div style="color: #155724; background-color: #d4edda; border: 1px solid #c3e6cb; border-radius: 8px; padding: 15px; margin-bottom: 20px;">
                    <strong>âœ“ Password Reset Successful!</strong>
                    <p style="margin: 10px 0 0 0;">Your password has been updated.</p>
                </div>
                <button class="button" onclick="window.location.href='{{url_for('login_page')}}'">
                    Go to Login
                </button>
            </div>
        </div>

        <script src="{{url_for('static', filename = 'js/navbar-scroll.js')}}"></script>
        <script src="{{url_for('static', filename = 'js/reset-password.js')}}"></script>
        <script src="{{url_for('static', filename = 'js/auth-check.js')}}"></script>
    </body>
</html>